<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout}">

<body>
<div layout:fragment="content">
  <div class="row d-flex justify-content-between px-4 pt-2">
    <h2>Cobranças</h2>
    <button type="button" class="btn btn-info add-new" th:onclick="'location.href=\'' + @{/billings/new} + '\';'">
      <i class="bx bx-plus"></i> Criar Registro
    </button>
  </div>
  <hr />

  <div class="alert alert-danger" role="alert" th:if="${message != null}">
    <strong>Erro:</strong>
    <span th:text="${message}"></span>
  </div>

  <form method="POST" th:action="@{/billings}" enctype="multipart/form-data" class="px-2 pb-2">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
      </div>
      <div class="custom-file">
        <input type="file" name="file" id="file" accept=".csv" class="custom-file-input"
               aria-describedby="inputGroupFileAddon01" />
        <label class="custom-file-label" for="file">Selecione um arquivo .csv...</label>
      </div>
      <input type="submit" class="btn btn-success" value="Confirmar" />
    </div>
  </form>

  <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
    <tr>
      <th class="th-sm">Id</th>
      <th class="th-sm">Cliente</th>
      <th class="th-sm">Parcela</th>
      <th class="th-sm">Operação</th>
      <th class="th-sm">Vencimento</th>
      <th class="th-sm">Email</th>
      <th class="th-sm">Telefone</th>
      <th class="th-sm">Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${billingPage.content.empty}">
      <td colspan="2"> Sem cobranças disponíveis </td>
    </tr>
    <tr th:each="billing, iStat : ${billingPage.content}" th:classappend="${billing.active} ? '' : 'table-danger'">
      <td th:text="${billing.id}" />
      <td th:text="${billing.customer}" />
      <td th:text="${billing.installment}" />
      <td th:text="${billing.operation}" />
      <td th:text="${billing.expiration}" />
      <td th:text="${billing.email}" />
      <td th:text="${billing.phone}" />
      <td class="d-flex justify-content-around" style="cursor: pointer;">
        <a class="edit text-warning" title="Edit" data-toggle="tooltip" th:href="@{/billings/edit/{id}(id=${billing.id})}">
          <i class="bx bxs-pencil"></i>
        </a>
        <a class="delete text-danger" title="Delete" data-toggle="tooltip" th:href="@{/billings/delete/{id}(id=${billing.id})}">
          <i class="bx bxs-trash-alt"></i>
        </a>
      </td>
    </tr>
    </tbody>
  </table>
  <nav aria-label="Page navigation" class="paging">
    <ul class="pagination justify-content-end" th:if="${billingPage.totalPages > 0}">
      <li class="page-item" th:classappend="${!billingPage.hasPrevious() ? 'disabled' : ''}">
        <a class="page-link" th:href="@{/billings(size=${billingPage.size}, page=${billingPage.number})}"
           tabindex="-1">Anterior</a>
      </li>
      <li class="page-item"
          th:if="${billingPage.totalPages > 0}"
          th:each="pageNumber : ${pageNumbers}"
          th:classappend="${pageNumber==billingPage.number + 1} ? active">
        <a class="page-link"
           th:href="@{/billings(size=${billingPage.size}, page=${pageNumber})}"
           th:text=${pageNumber}></a>
      </li>
      <li class="page-item" th:classappend="${!billingPage.hasNext() ? 'disabled' : ''}">
        <a class="page-link"
           th:href="@{/billings(size=${billingPage.size}, page=${billingPage.number + 2})}">Próximo</a>
      </li>
    </ul>
  </nav>
</div>
</div>
</body>
</html>